{"ast":null,"code":"import axios from 'axios';\nimport AuthService from './auth.service';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\nclass ClienteService {\n  constructor() {\n    var _this$user;\n    this.user = AuthService.getCurrentUser();\n    this.authHeader = (_this$user = this.user) !== null && _this$user !== void 0 && _this$user.accessToken ? {\n      Authorization: `Bearer ${this.user.accessToken}`\n    } : {};\n  }\n\n  // Obter perfil do cliente atual (usuário logado)\n  async getClienteProfile() {\n    console.log(\"Obtendo perfil do cliente com token:\", this.authHeader);\n    try {\n      const response = await axios.get(`${API_URL}/cliente/perfil`, {\n        headers: this.authHeader\n      });\n      console.log(\"Resposta completa do perfil do cliente:\", response);\n      console.log(\"Dados do cliente:\", response.data);\n\n      // Se a resposta não tiver uma estrutura clara, faça log de alguns caminhos possíveis\n      if (response.data) {\n        console.log(\"Caminhos possíveis para dados:\");\n        console.log(\"- response.data.cliente:\", response.data.cliente);\n        console.log(\"- response.data direto:\", response.data);\n        if (response.data.cliente) {\n          console.log(\"Campos em response.data.cliente:\", Object.keys(response.data.cliente));\n        } else {\n          console.log(\"Campos em response.data:\", Object.keys(response.data));\n        }\n      }\n      return response;\n    } catch (error) {\n      var _error$response;\n      console.error(\"Erro ao obter perfil:\", error);\n      console.error(\"Detalhes da resposta de erro:\", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n      throw error;\n    }\n  }\n\n  // Atualizar perfil do cliente\n  async updateClienteProfile(clienteData) {\n    return axios.put(`${API_URL}/cliente/perfil`, clienteData, {\n      headers: this.authHeader\n    });\n  }\n\n  // Obter histórico de consultas do cliente\n  async getConsultas() {\n    return axios.get(`${API_URL}/cliente/consultas`, {\n      headers: this.authHeader\n    });\n  }\n}\nexport default new ClienteService();","map":{"version":3,"names":["axios","AuthService","API_URL","process","env","REACT_APP_API_URL","ClienteService","constructor","_this$user","user","getCurrentUser","authHeader","accessToken","Authorization","getClienteProfile","console","log","response","get","headers","data","cliente","Object","keys","error","_error$response","updateClienteProfile","clienteData","put","getConsultas"],"sources":["C:/Users/s0ares/clinicadentaria_ai2/client/src/services/cliente.service.js"],"sourcesContent":["import axios from 'axios';\r\nimport AuthService from './auth.service';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000/api';\r\n\r\nclass ClienteService {\r\n  constructor() {\r\n    this.user = AuthService.getCurrentUser();\r\n    this.authHeader = this.user?.accessToken \r\n      ? { Authorization: `Bearer ${this.user.accessToken}` } \r\n      : {};\r\n  }\r\n\r\n  // Obter perfil do cliente atual (usuário logado)\r\n  async getClienteProfile() {\r\n    console.log(\"Obtendo perfil do cliente com token:\", this.authHeader);\r\n    try {\r\n      const response = await axios.get(`${API_URL}/cliente/perfil`, {\r\n        headers: this.authHeader\r\n      });\r\n      console.log(\"Resposta completa do perfil do cliente:\", response);\r\n      console.log(\"Dados do cliente:\", response.data);\r\n      \r\n      // Se a resposta não tiver uma estrutura clara, faça log de alguns caminhos possíveis\r\n      if (response.data) {\r\n        console.log(\"Caminhos possíveis para dados:\");\r\n        console.log(\"- response.data.cliente:\", response.data.cliente);\r\n        console.log(\"- response.data direto:\", response.data);\r\n        \r\n        if (response.data.cliente) {\r\n          console.log(\"Campos em response.data.cliente:\", Object.keys(response.data.cliente));\r\n        } else {\r\n          console.log(\"Campos em response.data:\", Object.keys(response.data));\r\n        }\r\n      }\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"Erro ao obter perfil:\", error);\r\n      console.error(\"Detalhes da resposta de erro:\", error.response?.data);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Atualizar perfil do cliente\r\n  async updateClienteProfile(clienteData) {\r\n    return axios.put(`${API_URL}/cliente/perfil`, clienteData, {\r\n      headers: this.authHeader\r\n    });\r\n  }\r\n\r\n  // Obter histórico de consultas do cliente\r\n  async getConsultas() {\r\n    return axios.get(`${API_URL}/cliente/consultas`, {\r\n      headers: this.authHeader\r\n    });\r\n  }\r\n}\r\n\r\nexport default new ClienteService();"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,gBAAgB;AAExC,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAE5E,MAAMC,cAAc,CAAC;EACnBC,WAAWA,CAAA,EAAG;IAAA,IAAAC,UAAA;IACZ,IAAI,CAACC,IAAI,GAAGR,WAAW,CAACS,cAAc,CAAC,CAAC;IACxC,IAAI,CAACC,UAAU,GAAG,CAAAH,UAAA,OAAI,CAACC,IAAI,cAAAD,UAAA,eAATA,UAAA,CAAWI,WAAW,GACpC;MAAEC,aAAa,EAAE,UAAU,IAAI,CAACJ,IAAI,CAACG,WAAW;IAAG,CAAC,GACpD,CAAC,CAAC;EACR;;EAEA;EACA,MAAME,iBAAiBA,CAAA,EAAG;IACxBC,OAAO,CAACC,GAAG,CAAC,sCAAsC,EAAE,IAAI,CAACL,UAAU,CAAC;IACpE,IAAI;MACF,MAAMM,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,GAAGhB,OAAO,iBAAiB,EAAE;QAC5DiB,OAAO,EAAE,IAAI,CAACR;MAChB,CAAC,CAAC;MACFI,OAAO,CAACC,GAAG,CAAC,yCAAyC,EAAEC,QAAQ,CAAC;MAChEF,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEC,QAAQ,CAACG,IAAI,CAAC;;MAE/C;MACA,IAAIH,QAAQ,CAACG,IAAI,EAAE;QACjBL,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;QAC7CD,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEC,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAC;QAC9DN,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEC,QAAQ,CAACG,IAAI,CAAC;QAErD,IAAIH,QAAQ,CAACG,IAAI,CAACC,OAAO,EAAE;UACzBN,OAAO,CAACC,GAAG,CAAC,kCAAkC,EAAEM,MAAM,CAACC,IAAI,CAACN,QAAQ,CAACG,IAAI,CAACC,OAAO,CAAC,CAAC;QACrF,CAAC,MAAM;UACLN,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEM,MAAM,CAACC,IAAI,CAACN,QAAQ,CAACG,IAAI,CAAC,CAAC;QACrE;MACF;MAEA,OAAOH,QAAQ;IACjB,CAAC,CAAC,OAAOO,KAAK,EAAE;MAAA,IAAAC,eAAA;MACdV,OAAO,CAACS,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7CT,OAAO,CAACS,KAAK,CAAC,+BAA+B,GAAAC,eAAA,GAAED,KAAK,CAACP,QAAQ,cAAAQ,eAAA,uBAAdA,eAAA,CAAgBL,IAAI,CAAC;MACpE,MAAMI,KAAK;IACb;EACF;;EAEA;EACA,MAAME,oBAAoBA,CAACC,WAAW,EAAE;IACtC,OAAO3B,KAAK,CAAC4B,GAAG,CAAC,GAAG1B,OAAO,iBAAiB,EAAEyB,WAAW,EAAE;MACzDR,OAAO,EAAE,IAAI,CAACR;IAChB,CAAC,CAAC;EACJ;;EAEA;EACA,MAAMkB,YAAYA,CAAA,EAAG;IACnB,OAAO7B,KAAK,CAACkB,GAAG,CAAC,GAAGhB,OAAO,oBAAoB,EAAE;MAC/CiB,OAAO,EAAE,IAAI,CAACR;IAChB,CAAC,CAAC;EACJ;AACF;AAEA,eAAe,IAAIL,cAAc,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}